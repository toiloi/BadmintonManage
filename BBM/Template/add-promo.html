<div class="container mt-4">
    <h2 class="mb-4">Thêm Khuyến Mãi</h2>
    <form id="promoForm">
        <div class="mb-3">
            <label for="promoCode" class="form-label">Mã Khuyến Mãi</label>
            <input type="text" class="form-control" id="promoCode" placeholder="Nhập mã khuyến mãi">
        </div>
        <div class="mb-3">
            <label for="discount" class="form-label">Giảm Giá (%)</label>
            <input type="number" class="form-control" id="discount" placeholder="Nhập phần trăm giảm giá">
        </div>
        <button type="submit" class="btn btn-success">✅ Thêm Khuyến Mãi</button>
    </form>

    <h3 class="mt-4">Danh Sách Khuyến Mãi</h3>
    <table class="table table-bordered mt-3">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Mã Khuyến Mãi</th>
                <th>Giảm Giá (%)</th>
            </tr>
        </thead>
        <tbody id="promoTable">
            <!-- Dữ liệu sẽ được load từ MySQL -->
        </tbody>
    </table>
</div>

<script>
    document.getElementById("promoForm").addEventListener("submit", function(event) {
        event.preventDefault();
        
        let promoCode = document.getElementById("promoCode").value;
        let discount = document.getElementById("discount").value;
        
        fetch("/api/promotions/add", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                promo_code: promoCode,
                discount: discount
            }),
        })
        .then(response => response.json())
        .then(data => {
            alert(data.message);
            fetchPromotions(); // Cập nhật lại danh sách khuyến mãi
        })
        .catch(error => console.error("Lỗi gửi dữ liệu:", error));
    });
</script>
