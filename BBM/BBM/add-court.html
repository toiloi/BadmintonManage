<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thêm Sân</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-4">
        <h2>Thêm Sân Mới</h2>
        <form id="court-form">
            <label for="court-name">Tên Sân:</label>
            <input type="text" id="court-name" class="form-control" required>

            <label for="court-address">Địa Chỉ:</label>
            <input type="text" id="court-address" class="form-control" required>

            <label for="court-time">Khung Giờ Hoạt Động:</label>
            <input type="time" id="court-time" class="form-control" required>

            <label for="court-close-time">Giờ Đóng Cửa:</label>
            <input type="time" id="court-close-time" class="form-control" required>

            <label for="court-price">Cài Đặt Giá Theo Tiếng:</label>
            <input type="text" id="court-price" class="form-control" required>

            <label for="court-image">Hình Ảnh Sân:</label>
            <input type="file" id="court-image" class="form-control" accept="image/*" required>
            <img id="preview-image" src="#" alt="Xem trước hình ảnh" style="display: none; width: 100%; max-height: 200px; margin-top: 10px;">

            <button type="button" class="btn btn-primary mt-3" onclick="addCourt()">Thêm Sân</button>
            <a href="CourtManager.html" class="btn btn-secondary mt-3">Quay Về Trang Chủ</a>
        </form>
    </div>

    <script>
        document.getElementById("court-image").addEventListener("change", function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById("preview-image").src = e.target.result;
                    document.getElementById("preview-image").style.display = "block";
                };
                reader.readAsDataURL(file);
            }
        });
    
        function addCourt() {
            let name = document.getElementById("court-name").value;
            let address = document.getElementById("court-address").value;
            let time = document.getElementById("court-time").value;
            let closeTime = document.getElementById("court-close-time").value;
            let price = document.getElementById("court-price").value;
            let imageInput = document.getElementById("court-image");

            if (!name || !address || !time || !closeTime || !price || !imageInput.files.length) {
                alert("Vui lòng nhập đầy đủ thông tin!");
                return;
            }

            let reader = new FileReader();
            reader.onload = function(event) {
                let imageUrl = event.target.result;
                let courts = JSON.parse(localStorage.getItem("courts")) || [];
                let newCourt = { name, address, time, closeTime, price, image: imageUrl };
                courts.push(newCourt);
                localStorage.setItem("courts", JSON.stringify(courts));
                window.location.href = "manage-court.html";
            };

            reader.readAsDataURL(imageInput.files[0]);
        }

    </script>
    
</body>
</html>
